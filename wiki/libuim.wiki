= これは何？ =
uimのライブラリ。 1.4.0以降では、SchemeインタープリタSigSchemeが内蔵されています。

= 使い方 =

1.4.0現在、標準では一部の機能が制限された状態で組み込まれます。

  * disable UTF-8 character encoding
  * disable all feasible encoding error checks
  * disable strict check for R5RS top-level definitions
  * disable R5RS characters
  * disable rest procedures of R5RS strings
  * disable all c[ad]+r procedures defined in R5RS
  * disable R5RS vectors
  * disable SRFI-2 `'and-let*'`
  * disable SRFI-8 `'receive'`
  * disable SRFI-75 R6RS unicode data (partial and obsolete)

SIODに依存したコードが残っているので、以下の機能が有効になっています。

  * enable some SIOD compatible features
  * enable emulating the buggy behaviors of SIOD

以下は明示的に有効にされています。

  * enable EUC-JP character encoding

以下は明示的に無効にされています。

  * disable building libsscm
  * disable the 'sscm' interactive shell

= ファイル =
||~/.uim.d/customs/custom-global.scm||uim-pref-gtk/uim-pref-qtの全体設定ファイル。||
||~/.uim.d/customs/custom-global-keys{1,2}.scm||uim-pref-gtk/uim-pref-qtの全体キー設定ファイル。 ||

= 環境変数 =
||LIBUIM_VERBOSE||メッセージの冗長レベルを指定できます。3を指定するとファイルの読み込み状況を出力。4を指定するとGCの利用状況を出力。5を指定するとコードの評価過程を出力。この環境変数を利用するにはuimを--enable-debugでビルドする必要があります。||
||LIBUIM_ENABLE_EMERGENCY_KEY||emergency keyを有効にします。この環境変数をブリッジの起動前に指定すると、Shift+BSを押す事でuimのキー処理をすべて無効にできるようになります。||
||LIBUIM_VANILLA||2を指定すると、設定ファイル(default.scm や~/.uim、~/.uim.dなど)を無視、遅延ローディングを無効にします。それ以外を指定すると、設定ファイル(sys-pkgdatadir /default.scmや~/.uim、~/.uim.dなど)を無視、遅延ローディングを無効、direct以外のモジュールを読み込まなくなります。||
||LIBUIM_SCM_FILES||Schemeファイルを置くディレクトリを指定します。標準ではsys-pkgdatadir、~/.uim.d/pluginです。||
||LIBUIM_USER_SCM_FILE||ユーザーの設定ファイルを指定します。標準では~/.uimです。||
||LIBUIM_PLUGIN_LIB_DIR||プラグインファイルを置くディレクトリを指定します。標準ではsys-pkglibdir/plugin、~/.uim.d/plugin、LD_LIBRARY_PATHです。||
||UIM_IM_ENGINE||入力方式名を指定します。||

= カスタマイズ可能な項目 =
== 全体設定の変数 ==
<table border="1">
<tr><th>動作</th><th>変数名</th><th>指定できる値</th><th>標準値</th></tr>
<tr><td rowspan="2">標準の入力方式</td><td rowspan="2">default-im-name</td><td>'IM名</td><td rowspan="2">#f</td></tr>
<tr><td>#f</td></tr>
<tr><td rowspan="2">使用可能にする入力方式</td><td rowspan="2">enabled-im-list</td><td>'IM名</td><td rowspan="2">任意</td></tr>
<tr><td>'(IM名 IM名)</td></tr>
<tr><td rowspan="2">ホットキーによる入力方式の正副一時切り換えを有効にする</td><td rowspan="2">enable-im-toggle?</td><td>#t</td><td rowspan="2">#t</td></tr>
<tr><td>#f</td></tr>
<tr><td>一時切り換えキー</td><td>toggle-im-key</td><td>'("キー")</td><td>'("<Meta> ")</td></tr>
<tr><td>副入力方式</td><td rowspan="2">toggle-im-alt-im</td><td rowspan="2">'IM名</td><td>'direct以外</td></tr>
<tr><td>副入力方式 (trunk)</td><td>'direct</td></tr>
<tr><td rowspan="2">編集領域の配色</td><td rowspan="2">uim-color</td><td>'uim-color-uim</td><td rowspan="2">'uim-color-uim</td></tr>
<tr><td>'uim-color-atok</td></tr>
<tr><td rowspan="3">候補ウィンドウの表示位置</td><td rowspan="3">candidate-window-position</td><td>'caret</td><td rowspan="3">'caret</td></tr>
<tr><td>'left</td></tr>
<tr><td>'right</td></tr>
<tr><td rowspan="2">高速起動のための遅延ローディングを有効にする</td><td rowspan="2">enable-lazy-loading?</td><td>#t</td><td rowspan="2">#t</td></tr>
<tr><td>#f</td></tr>
<tr><td rowspan="2">カーソルの側に入力モードを表示する</td><td rowspan="2">bridge-show-input-state?</td><td>#t</td><td rowspan="2">#f</td></tr>
<tr><td>#f</td></tr>
<tr><td>カーソルの側に入力モードを表示する時間</td><td>bridge-show-input-state-time-length</td><td>秒数</td><td>3</td></tr>
</table>

== その他の入力方式の変数 ==
<table border="1">
<tr><th>動作</th><th>変数名</th><th>指定できる値</th><th>標準値</th></tr>
<tr><td rowspan="2">候補ウィンドウを使用する</td><td rowspan="2">generic-use-candidate-window?</td><td>#t</td><td rowspan="2">#t</td></tr>
<tr><td>#f</td></tr>
<tr><td>候補ウィンドウの表示を開始するために変換キーを押す回数</td><td>generic-candidate-op-count</td><td rowspan="2">数字</td><td>1</td></tr>
<tr><td>候補ウィンドウに一度に表示する候補数</td><td>generic-nr-candidate-max</td><td>10</td></tr>
<tr><td rowspan="2">数字キーで候補を選択する</td><td rowspan="2">generic-commit-candidate-by-numeral-key?</td><td>#t</td><td rowspan="2">#t</td></tr>
<tr><td>#f</td></tr>
</table>

== 全体キー設定の変数 ==
<table border="1">
<tr><th>動作</th><th>キー変数名</th></tr>
<tr><td>オン</td><td>generic-on-key?</td></tr>
<tr><td>オフ</td><td>generic-off-key?</td></tr>
<tr><td>変換開始</td><td>generic-begin-conv-key?</td></tr>
<tr><td>確定</td><td>generic-commit-key?</td></tr>
<tr><td>キャンセル</td><td>generic-cancel-key?</td></tr>
<tr><td>次候補</td><td>generic-next-candidate-key?</td></tr>
<tr><td>前候補</td><td>generic-prev-candidate-key?</td></tr>
<tr><td>候補ウィンドウの次ページ</td><td>generic-next-page-key?</td></tr>
<tr><td>候補ウィンドウの前ページ</td><td>generic-prev-page-key?</td></tr>
<tr><td>編集領域の先頭</td><td>generic-beginning-of-preedit-key?</td></tr>
<tr><td>編集領域の末尾</td><td>generic-end-of-preedit-key?</td></tr>
<tr><td>カーソル以降を消去</td><td>generic-kill-key?</td></tr>
<tr><td>カーソル以前を消去</td><td>generic-kill-backward-key?</td></tr>
<tr><td>バックスペース</td><td>generic-backspace-key?</td></tr>
<tr><td>デリート</td><td>generic-delete-key?</td></tr>
<tr><td>左に移動</td><td>generic-go-left-key?</td></tr>
<tr><td>右に移動</td><td>generic-go-right-key?</td></tr>
<tr><td>リターン</td><td>generic-return-key?</td></tr>
</table>